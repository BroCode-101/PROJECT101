CREATE TABLE reservation_table (
    login_id NUMBER(50) UNIQUE,
    unique_id NUMBER(50) UNIQUE,
    username VARCHAR(50),
    stage_number NUMBER(10)
);

INSERT INTO reservation_table (login_id, unique_id, username, stage_number) 
VALUES (101, 1001, 'JohnDoe', 1),
       (102, 1002, 'JaneSmith', 2);

CREATE TABLE user_details (
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    phone_no NUMBER(10),
    email VARCHAR(30) UNIQUE
);

INSERT INTO user_details (first_name, last_name, phone_no, email)
VALUES ('John', 'Doe', 9876543210, 'john.doe@example.com'),
       ('Jane', 'Smith', 9123456789, 'jane.smith@example.com');

ALTER TABLE reservation_table ADD reservation_percent DOUBLE;

UPDATE reservation_table 
SET reservation_percent = 75.5 
WHERE unique_id = 1001;

UPDATE reservation_table 
SET reservation_percent = 85.3 
WHERE unique_id = 1002;

CREATE TABLE train_details (
    train_id NUMBER(50) UNIQUE,
    unique_id NUMBER(10),
    train_name VARCHAR(50),
    status VARCHAR(3)
);

INSERT INTO train_details (train_id, unique_id, train_name, status)
VALUES (1, 1001, 'Express Train', 'ON'),
       (2, 1002, 'Local Train', 'OFF');

ALTER TABLE user_details ADD CONSTRAINT pk_email PRIMARY KEY (email);

ALTER TABLE train_details ADD CONSTRAINT fk_unique_id FOREIGN KEY (unique_id) REFERENCES reservation_table (unique_id);

ALTER TABLE user_details DROP COLUMN phone_no;

DROP TABLE train_details;

ALTER TABLE reservation_table RENAME TO reservation_details;

TRUNCATE TABLE reservation_details;
